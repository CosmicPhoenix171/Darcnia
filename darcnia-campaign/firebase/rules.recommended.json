{
  "rules": {
    "characters": {
      "$characterId": {
        ".read": true,
        ".write": true
      }
    },
    "marketState": { ".read": true, ".write": true },
    "categoryAdjustments": { ".read": true, ".write": true },
    "vendorAdjustments": { ".read": true, ".write": true },

    "sessions": {
      "$sessionId": {
        "state": {
          ".read": true,
          ".write": "auth != null && root.child('sessions/' + $sessionId + '/roleByUid/' + auth.uid).val() === 'dm'",
          ".validate": "newData.hasChildren(['map','tokens','fog','initiative','meta']) && newData.child('map/w').isNumber() && newData.child('map/h').isNumber() && newData.child('map/w').val() <= 200 && newData.child('map/h').val() <= 200"
        },
        "events": {
          ".read": true,
          "$eventId": {
            ".write": "auth != null",
            ".validate": "newData.hasChildren(['ev','data']) && newData.child('ev').isString()"
          }
        },
        "presence": {
          "$clientId": { ".read": true, ".write": true }
        },
        "roleByUid": {
          ".read": "auth != null",
          ".write": "auth != null && root.child('sessions/' + $sessionId + '/roleByUid/' + auth.uid).val() === 'dm'"
        }
      }
    }
  }
}
