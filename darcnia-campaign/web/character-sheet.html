<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D&D 2024 Character Sheet | Darcnia Campaign</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Cinzel+Decorative:wght@400;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=IM+Fell+English:ital@0;1&family=IM+Fell+English+SC&family=Inter:wght@400;500;600;700&family=MedievalSharp&family=Great+Vibes&family=Uncial+Antiqua&family=Cormorant+Garamond:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css?v=1.51">
    <link rel="stylesheet" href="css/character-sheet.css?v=1.51">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üìã</text></svg>">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header (Same as main page) -->
        <header>
            <div class="header-top">
                <div>
                    <h1>Darcnia: The Floating Continent</h1>
                    <p class="subtitle">D&D 2024 Character Sheet</p>
                </div>
                <div class="header-buttons">
                    <!-- Search Bar -->
                    <div class="search-container">
                        <button id="loginBtn" class="login-button">üë§ Login</button>
                    </div>
                </div>
            </div>
            
            <!-- Theme Toggle removed per user request -->
        </header>

        <!-- Navigation Tabs -->
        <nav class="tabs">
            <a href="index.html#market" class="tab-btn" title="Market">Market</a>
            <a href="index.html#quests" class="tab-btn" title="Quests">Quests</a>
            <button class="tab-btn active">üìã Character Sheet</button>
            <a href="index.html#dice" class="tab-btn" title="Dice Roller">üé≤ Dice Roller</a>
        </nav>

    <!-- Main Content Area (compact layout applied) -->
    <main class="character-sheet compact">
        <!-- Quick Summary Header (Roll20-like) -->
        <section class="sheet-summary">
            <div class="summary-left">
                <div class="summary-card">
                    <div class="portrait" id="portrait" aria-label="Character portrait" title="Click to set portrait"></div>
                    <input type="file" id="portraitFile" accept="image/*" hidden>
                    <div class="summary-id">
                    <!-- Hero Section: Name & Level -->
                    <div class="hero-section">
                        <div class="hero-name-row">
                            <input type="text" class="name-display vanishing-textbox hero-name" id="nameDisplay" placeholder="Character Name">
                            <span class="level-badge" id="levelPill" title="Current Level (auto-calculated from XP)">
                                <span class="level-number">1</span>
                            </span>
                        </div>
                        <div class="hero-subtitle">
                            <input type="text" id="class" class="vanishing-textbox inline-edit" placeholder="Class">
                            <span class="divider">‚Ä¢</span>
                            <input type="text" id="background" class="vanishing-textbox inline-edit" placeholder="Background">
                        </div>
                    </div>
                    
                    <!-- XP Progress Bar Section -->
                    <div class="xp-section">
                        <div class="xp-header">
                            <span class="xp-label">Experience</span>
                            <span class="xp-display">
                                <input type="number" id="experiencePoints" class="vanishing-textbox xp-input" placeholder="0" min="0">
                                <span class="xp-separator">/</span>
                                <span class="xp-target" id="xpTarget">300</span>
                            </span>
                        </div>
                        <div class="xp-progress-bar">
                            <div class="xp-progress-fill" id="xpProgressFill" style="width: 0%"></div>
                        </div>
                        <div class="xp-next-text" id="xpToNext">300 XP to level 2</div>
                    </div>
                    
                    <!-- Character Details Grid -->
                    <div class="char-details-grid">
                        <div class="detail-item">
                            <span class="detail-icon">üß¨</span>
                            <div class="detail-content">
                                <label class="detail-label">Species</label>
                                <input type="text" id="species" class="vanishing-textbox detail-value" placeholder="Species">
                            </div>
                        </div>
                        <div class="detail-item">
                            <span class="detail-icon">‚öñÔ∏è</span>
                            <div class="detail-content">
                                <label class="detail-label">Alignment</label>
                                <input type="text" id="alignment" class="vanishing-textbox detail-value" placeholder="Alignment">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Proficiency Badge -->
                    <div class="prof-badge">
                        <span class="prof-label">Proficiency</span>
                        <strong class="prof-value" id="profBonusDisplay">+2</strong>
                    </div>

                    <!-- Quick Stats Row: AC ‚Ä¢ Speed ‚Ä¢ Initiative -->
                    <div class="quick-stats" aria-label="Quick combat stats">
                        <div class="mini-stat">
                            <span class="mini-label">AC</span>
                            <input type="number" min="0" id="armorClass" class="mini-value-input" value="10" />
                        </div>
                        <div class="mini-stat">
                            <span class="mini-label">Speed</span>
                            <input type="text" id="speed" class="mini-value-input" value="30" />
                        </div>
                        <div class="mini-stat">
                            <span class="mini-label">Init</span>
                            <input type="text" id="initiativeQuick" class="mini-value-input" value="+0" />
                        </div>
                    </div>

                    <!-- Quick HP block -->
                    <div class="hp-quick" aria-label="Quick HP">
                        <div class="hpq-grid">
                            <div class="mini-stat">
                                <span class="mini-label">Current</span>
                                <input type="number" min="0" id="hpCurrent" class="mini-value-input" value="0" />
                            </div>
                            <div class="mini-stat">
                                <span class="mini-label">Max</span>
                                <input type="number" min="0" id="hpMax" class="mini-value-input" value="0" />
                            </div>
                            <div class="mini-stat">
                                <span class="mini-label">Temp</span>
                                <input type="number" min="0" id="hpTemp" class="mini-value-input" value="0" />
                            </div>
                        </div>
                        <div class="hpq-controls">
                            <div class="hpq-group">
                                <label for="damageQuick" class="hpq-label">Damage</label>
                                <input id="damageQuick" type="number" min="0" value="0" />
                                <button id="applyDamageQuick" class="btn-mini danger">Apply</button>
                            </div>
                            <div class="hpq-group">
                                <label for="healQuick" class="hpq-label">Heal</label>
                                <input id="healQuick" type="number" min="0" value="0" />
                                <button id="applyHealQuick" class="btn-mini success">Apply</button>
                            </div>
                            <div class="hpq-rest">
                                <button id="shortRestQuick" class="btn-mini">Short Rest</button>
                                <button id="longRestQuick" class="btn-mini">Long Rest</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
        </section>

        <!-- View Tabs: Combat / Spells / Inventory / Features / Notes / About -->
        <div class="sheet-tabs" role="tablist" aria-label="Character sheet views">
            <button class="sheet-tab tab-active" data-tab="combat">Combat</button>
            <button class="sheet-tab" data-tab="spells">Spells</button>
            <button class="sheet-tab" data-tab="inventory">Inventory</button>
            <button class="sheet-tab" data-tab="features">Features &amp; Traits</button>
            <button class="sheet-tab" data-tab="notes">Notes</button>
            <button class="sheet-tab" data-tab="about">About</button>
        </div>

        <!-- Main Stats Grid -->
        <div class="main-grid">
            <!-- Left Column: Ability Scores & Skills -->
            <aside class="left-column">
                <!-- Ability Scores -->
                <section class="ability-scores">
                    <h2>Ability Scores</h2>
                    <div class="abilities-grid">
                        <div class="ability-block" data-ability="str">
                            <div class="ability-header">STR</div>
                            <div class="ability-modifier" id="strMod">+0</div>
                            <input type="number" class="ability-score" id="strScore" value="10" min="1" max="30">
                            <div class="ability-label">Strength</div>
                        </div>
                        <div class="ability-block" data-ability="dex">
                            <div class="ability-header">DEX</div>
                            <div class="ability-modifier" id="dexMod">+0</div>
                            <input type="number" class="ability-score" id="dexScore" value="10" min="1" max="30">
                            <div class="ability-label">Dexterity</div>
                        </div>
                        <div class="ability-block" data-ability="con">
                            <div class="ability-header">CON</div>
                            <div class="ability-modifier" id="conMod">+0</div>
                            <input type="number" class="ability-score" id="conScore" value="10" min="1" max="30">
                            <div class="ability-label">Constitution</div>
                        </div>
                        <div class="ability-block" data-ability="int">
                            <div class="ability-header">INT</div>
                            <div class="ability-modifier" id="intMod">+0</div>
                            <input type="number" class="ability-score" id="intScore" value="10" min="1" max="30">
                            <div class="ability-label">Intelligence</div>
                        </div>
                        <div class="ability-block" data-ability="wis">
                            <div class="ability-header">WIS</div>
                            <div class="ability-modifier" id="wisMod">+0</div>
                            <input type="number" class="ability-score" id="wisScore" value="10" min="1" max="30">
                            <div class="ability-label">Wisdom</div>
                        </div>
                        <div class="ability-block" data-ability="cha">
                            <div class="ability-header">CHA</div>
                            <div class="ability-modifier" id="chaMod">+0</div>
                            <input type="number" class="ability-score" id="chaScore" value="10" min="1" max="30">
                            <div class="ability-label">Charisma</div>
                        </div>
                    </div>
                </section>

                <!-- Proficiency Bonus & Inspiration -->
                <section class="bonus-section">
                    <div class="bonus-item">
                        <label for="proficiencyBonus">Proficiency Bonus</label>
                        <input type="number" id="proficiencyBonus" value="2" min="2" max="6">
                    </div>
                    <div class="bonus-item">
                        <label>
                            <input type="checkbox" id="inspiration">
                            Inspiration
                        </label>
                    </div>
                </section>

                <!-- Saving Throws -->
                <section class="saves-section">
                    <h3>Saving Throws</h3>
                    <div class="skill-list">
                        <div class="skill-item">
                            <input type="checkbox" id="strSaveProf" class="save-prof">
                            <span class="skill-bonus" id="strSave">+0</span>
                            <label for="strSaveProf">Strength</label>
                        </div>
                        <div class="skill-item">
                            <input type="checkbox" id="dexSaveProf" class="save-prof">
                            <span class="skill-bonus" id="dexSave">+0</span>
                            <label for="dexSaveProf">Dexterity</label>
                        </div>
                        <div class="skill-item">
                            <input type="checkbox" id="conSaveProf" class="save-prof">
                            <span class="skill-bonus" id="conSave">+0</span>
                            <label for="conSaveProf">Constitution</label>
                        </div>
                        <div class="skill-item">
                            <input type="checkbox" id="intSaveProf" class="save-prof">
                            <span class="skill-bonus" id="intSave">+0</span>
                            <label for="intSaveProf">Intelligence</label>
                        </div>
                        <div class="skill-item">
                            <input type="checkbox" id="wisSaveProf" class="save-prof">
                            <span class="skill-bonus" id="wisSave">+0</span>
                            <label for="wisSaveProf">Wisdom</label>
                        </div>
                        <div class="skill-item">
                            <input type="checkbox" id="chaSaveProf" class="save-prof">
                            <span class="skill-bonus" id="chaSave">+0</span>
                            <label for="chaSaveProf">Charisma</label>
                        </div>
                    </div>
                </section>

                <!-- Skills (Grouped by Ability) -->
                <section class="skills-section">
                    <h3>Skills</h3>
                    
                    <!-- Strength Skills -->
                    <div class="skill-group">
                        <div class="skill-group-header">Strength</div>
                        <div class="skill-item">
                            <input type="checkbox" id="athleticsProf">
                            <span class="skill-bonus" id="athletics">+0</span>
                            <label for="athleticsProf">Athletics</label>
                        </div>
                    </div>

                    <!-- Dexterity Skills -->
                    <div class="skill-group">
                        <div class="skill-group-header">Dexterity</div>
                        <div class="skill-item">
                            <input type="checkbox" id="acrobaticsProf">
                            <span class="skill-bonus" id="acrobatics">+0</span>
                            <label for="acrobaticsProf">Acrobatics</label>
                        </div>
                        <div class="skill-item">
                            <input type="checkbox" id="sleightOfHandProf">
                            <span class="skill-bonus" id="sleightOfHand">+0</span>
                            <label for="sleightOfHandProf">Sleight of Hand</label>
                        </div>
                        <div class="skill-item">
                            <input type="checkbox" id="stealthProf">
                            <span class="skill-bonus" id="stealth">+0</span>
                            <label for="stealthProf">Stealth</label>
                        </div>
                    </div>

                    <!-- Intelligence Skills -->
                    <div class="skill-group">
                        <div class="skill-group-header">Intelligence</div>
                        <div class="skill-item">
                            <input type="checkbox" id="arcanaProf">
                            <span class="skill-bonus" id="arcana">+0</span>
                            <label for="arcanaProf">Arcana</label>
                        </div>
                        <div class="skill-item">
                            <input type="checkbox" id="historyProf">
                            <span class="skill-bonus" id="history">+0</span>
                            <label for="historyProf">History</label>
                        </div>
                        <div class="skill-item">
                            <input type="checkbox" id="investigationProf">
                            <span class="skill-bonus" id="investigation">+0</span>
                            <label for="investigationProf">Investigation</label>
                        </div>
                        <div class="skill-item">
                            <input type="checkbox" id="natureProf">
                            <span class="skill-bonus" id="nature">+0</span>
                            <label for="natureProf">Nature</label>
                        </div>
                        <div class="skill-item">
                            <input type="checkbox" id="religionProf">
                            <span class="skill-bonus" id="religion">+0</span>
                            <label for="religionProf">Religion</label>
                        </div>
                    </div>

                    <!-- Wisdom Skills -->
                    <div class="skill-group">
                        <div class="skill-group-header">Wisdom</div>
                        <div class="skill-item">
                            <input type="checkbox" id="animalHandlingProf">
                            <span class="skill-bonus" id="animalHandling">+0</span>
                            <label for="animalHandlingProf">Animal Handling</label>
                        </div>
                        <div class="skill-item">
                            <input type="checkbox" id="insightProf">
                            <span class="skill-bonus" id="insight">+0</span>
                            <label for="insightProf">Insight</label>
                        </div>
                        <div class="skill-item">
                            <input type="checkbox" id="medicineProf">
                            <span class="skill-bonus" id="medicine">+0</span>
                            <label for="medicineProf">Medicine</label>
                        </div>
                        <div class="skill-item">
                            <input type="checkbox" id="perceptionProf">
                            <span class="skill-bonus" id="perception">+0</span>
                            <label for="perceptionProf">Perception</label>
                        </div>
                        <div class="skill-item">
                            <input type="checkbox" id="survivalProf">
                            <span class="skill-bonus" id="survival">+0</span>
                            <label for="survivalProf">Survival</label>
                        </div>
                    </div>

                    <!-- Charisma Skills -->
                    <div class="skill-group">
                        <div class="skill-group-header">Charisma</div>
                        <div class="skill-item">
                            <input type="checkbox" id="deceptionProf">
                            <span class="skill-bonus" id="deception">+0</span>
                            <label for="deceptionProf">Deception</label>
                        </div>
                        <div class="skill-item">
                            <input type="checkbox" id="intimidationProf">
                            <span class="skill-bonus" id="intimidation">+0</span>
                            <label for="intimidationProf">Intimidation</label>
                        </div>
                        <div class="skill-item">
                            <input type="checkbox" id="performanceProf">
                            <span class="skill-bonus" id="performance">+0</span>
                            <label for="performanceProf">Performance</label>
                        </div>
                        <div class="skill-item">
                            <input type="checkbox" id="persuasionProf">
                            <span class="skill-bonus" id="persuasion">+0</span>
                            <label for="persuasionProf">Persuasion</label>
                        </div>
                    </div>
                </section>

                <!-- Passive Perception -->
                <section class="passive-section">
                    <div class="passive-item">
                        <label>Passive Perception</label>
                        <div class="passive-value" id="passivePerception">10</div>
                    </div>
                </section>
            </aside>

            <!-- Center Column: Combat Stats & Resources -->
            <div class="center-column">
                <!-- Combat Stats -->
                <section class="combat-stats">
                    <div class="stat-box">
                        <label for="armorClass">Armor Class</label>
                        <input type="number" id="armorClass" class="large-stat" value="10" min="1">
                    </div>
                    <div class="stat-box">
                        <label for="initiative">Initiative</label>
                        <div class="large-stat calculated" id="initiative">+0</div>
                    </div>
                    <div class="stat-box">
                        <label for="speed">Speed</label>
                        <input type="text" id="speed" class="large-stat" value="30 ft" placeholder="30 ft">
                    </div>
                </section>

                <!-- Hit Points -->
                <section class="hp-section">
                    <div class="hp-grid">
                        <div class="hp-main">
                            <label>Hit Point Maximum</label>
                            <input type="number" id="hpMax" value="0" min="0">
                        </div>
                        <div class="hp-current">
                            <label>Current HP</label>
                            <input type="number" id="hpCurrent" value="0" min="0">
                        </div>
                        <div class="hp-temp">
                            <label>Temporary HP</label>
                            <input type="number" id="hpTemp" value="0" min="0">
                        </div>
                    </div>
                    <div class="hit-dice-section">
                        <label for="hitDice">Hit Dice</label>
                        <input type="text" id="hitDice" placeholder="e.g., 5d8">
                        <label for="hitDiceUsed">Used</label>
                        <input type="number" id="hitDiceUsed" value="0" min="0">
                    </div>
                    <div class="death-saves">
                        <h4>Death Saves</h4>
                        <div class="death-save-row">
                            <span>Successes:</span>
                            <input type="checkbox" id="deathSave1">
                            <input type="checkbox" id="deathSave2">
                            <input type="checkbox" id="deathSave3">
                        </div>
                        <div class="death-save-row">
                            <span>Failures:</span>
                            <input type="checkbox" id="deathFail1">
                            <input type="checkbox" id="deathFail2">
                            <input type="checkbox" id="deathFail3">
                        </div>
                    </div>
                </section>

                <!-- Attacks & Spellcasting -->
                <section class="attacks-section" data-panel="combat">
                    <h3>Attacks & Spellcasting</h3>
                    <div class="weapons-controls">
                        <button id="addWeaponBtn" class="btn-mini">+ Add Weapon</button>
                        <span class="disadv-indicator" id="attackDisadvIndicator" title="Poisoned: Attacks have disadvantage" hidden>Disadvantage (Poisoned)</span>
                    </div>
                    <div class="weapons-table-wrapper">
                        <table class="weapons-table" id="weaponsTable" aria-label="Weapons and attacks">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Type</th>
                                    <th>Prof</th>
                                    <th>Ability</th>
                                    <th>Base Die</th>
                                    <th>Magic</th>
                                    <th>Damage Type</th>
                                    <th>Attack</th>
                                    <th>Damage</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody id="weaponsBody"></tbody>
                        </table>
                    </div>
                </section>

                <!-- Equipment & Treasure -->
                <section class="equipment-section" data-panel="inventory">
                    <h3>Equipment & Treasure</h3>
                    <div class="coins-grid">
                        <div class="coin-field"><label for="pp">PP</label><input type="number" id="pp" value="0" min="0"></div>
                        <div class="coin-field"><label for="gp">GP</label><input type="number" id="gp" value="0" min="0"></div>
                        <div class="coin-field"><label for="ep">EP</label><input type="number" id="ep" value="0" min="0"></div>
                        <div class="coin-field"><label for="sp">SP</label><input type="number" id="sp" value="0" min="0"></div>
                        <div class="coin-field"><label for="cp">CP</label><input type="number" id="cp" value="0" min="0"></div>
                        <div class="coin-summary">Coins Weight: <strong id="coinsWeight">0 lb</strong> ‚Ä¢ Wealth: <strong id="coinsWealth">0 gp</strong></div>
                    </div>
                    <div class="inventory-controls">
                        <button id="addItemBtn" class="btn-mini">+ Add Item</button>
                        <div class="encumbrance">Total Weight: <strong id="totalWeight">0 lb</strong> ‚Ä¢ Carry Capacity: <strong id="carryCapacity">0 lb</strong> ‚Ä¢ <span id="encumbranceStatus">Unencumbered</span></div>
                    </div>
                    <div class="inventory-table-wrapper">
                        <table class="inventory-table" id="inventoryTable" aria-label="Inventory items">
                            <thead>
                                <tr>
                                    <th>Item</th>
                                    <th>Weight (lb)</th>
                                    <th>Qty</th>
                                    <th>Total</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody id="inventoryBody"></tbody>
                        </table>
                    </div>
                    <textarea id="equipment" rows="4" placeholder="Notes about equipment or treasure..."></textarea>
                </section>

                <!-- Attunement Slots (D&D 2024) -->
                <section class="attunement-section" data-panel="inventory">
                    <h3>Attunement Slots <span class="attunement-count">(Max 3)</span></h3>
                    <div class="attunement-grid">
                        <div class="attunement-slot">
                            <label>
                                <input type="checkbox" id="attune1">
                                Slot 1
                            </label>
                            <input type="text" id="attune1Item" placeholder="Magic item name...">
                        </div>
                        <div class="attunement-slot">
                            <label>
                                <input type="checkbox" id="attune2">
                                Slot 2
                            </label>
                            <input type="text" id="attune2Item" placeholder="Magic item name...">
                        </div>
                        <div class="attunement-slot">
                            <label>
                                <input type="checkbox" id="attune3">
                                Slot 3
                            </label>
                            <input type="text" id="attune3Item" placeholder="Magic item name...">
                        </div>
                    </div>
                </section>
            </div>

            <!-- Right Column: Features, Traits, & Spells -->
            <aside class="right-column">
                <!-- Personality & Background -->
                <section class="personality-section" data-panel="about">
                    <h3>Personality</h3>
                    <div class="personality-grid">
                        <div class="form-group">
                            <label for="personalityTraits">Personality Traits</label>
                            <textarea id="personalityTraits" rows="2" placeholder="Describe your character's personality..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="ideals">Ideals</label>
                            <textarea id="ideals" rows="2" placeholder="What drives your character?"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="bonds">Bonds</label>
                            <textarea id="bonds" rows="2" placeholder="What connections matter most?"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="flaws">Flaws</label>
                            <textarea id="flaws" rows="2" placeholder="What weaknesses does your character have?"></textarea>
                        </div>
                    </div>
                </section>

                <!-- Class Features & Feats -->
                <section class="features-section" data-panel="features">
                    <h3>Class Features & Feats</h3>
                    <textarea id="classFeatures" rows="10" placeholder="List your class features, racial traits, and feats here...&#10;&#10;Example:&#10;‚Ä¢ Second Wind (1/short rest)&#10;‚Ä¢ Action Surge (1/short rest)&#10;‚Ä¢ Fighting Style: Dueling"></textarea>
                </section>

                <!-- Proficiencies & Languages -->
                <section class="proficiencies-section" data-panel="about">
                    <h3>Proficiencies & Languages</h3>
                    <textarea id="proficiencies" rows="5" placeholder="Armor: Light, Medium, Shields&#10;Weapons: Simple, Martial&#10;Tools: Thieves' Tools&#10;Languages: Common, Elvish"></textarea>
                </section>

                <!-- Defenses / Conditions / Senses (right sidebar widgets) -->
                <section class="defenses-section">
                    <h3>Defenses</h3>
                    <div class="mini-list">
                        <label for="resistances">Resistances / Immunities</label>
                        <textarea id="resistances" rows="3" placeholder="None"></textarea>
                    </div>
                </section>
                <section class="conditions-section">
                    <h3>Conditions</h3>
                    <div class="conditions-grid">
                        <label class="cond"><input type="checkbox" class="cond-toggle" data-cond="poisoned"> Poisoned</label>
                        <label class="cond"><input type="checkbox" class="cond-toggle" data-cond="blinded"> Blinded</label>
                        <label class="cond"><input type="checkbox" class="cond-toggle" data-cond="deafened"> Deafened</label>
                        <label class="cond"><input type="checkbox" class="cond-toggle" data-cond="frightened"> Frightened</label>
                        <label class="cond"><input type="checkbox" class="cond-toggle" data-cond="grappled"> Grappled</label>
                        <label class="cond"><input type="checkbox" class="cond-toggle" data-cond="incapacitated"> Incapacitated</label>
                        <label class="cond"><input type="checkbox" class="cond-toggle" data-cond="invisible"> Invisible</label>
                        <label class="cond"><input type="checkbox" class="cond-toggle" data-cond="paralyzed"> Paralyzed</label>
                        <label class="cond"><input type="checkbox" class="cond-toggle" data-cond="petrified"> Petrified</label>
                        <label class="cond"><input type="checkbox" class="cond-toggle" data-cond="prone"> Prone</label>
                        <label class="cond"><input type="checkbox" class="cond-toggle" data-cond="restrained"> Restrained</label>
                        <label class="cond"><input type="checkbox" class="cond-toggle" data-cond="stunned"> Stunned</label>
                        <label class="cond"><input type="checkbox" class="cond-toggle" data-cond="unconscious"> Unconscious</label>
                    </div>
                    <div class="exhaustion-row">
                        <label for="exhaustion">Exhaustion</label>
                        <input id="exhaustion" type="number" min="0" max="6" value="0">
                    </div>
                    <textarea id="conditionsNotes" rows="2" placeholder="Condition notes..."></textarea>
                </section>
                <section class="senses-section">
                    <h3>Senses</h3>
                    <div class="mini-list">
                        <label for="senses">Passive Senses</label>
                        <textarea id="senses" rows="2" placeholder="Investigation 10, Insight 10, Perception 10"></textarea>
                    </div>
                </section>

                <!-- Spells -->
                <section class="spells-section" data-panel="spells">
                    <h3>Spellcasting</h3>
                    <div class="spell-stats">
                        <div class="spell-stat">
                            <label for="spellcastingAbility">Spellcasting Ability</label>
                            <input type="text" id="spellcastingAbility" placeholder="INT/WIS/CHA">
                        </div>
                        <div class="spell-stat">
                            <label for="spellSaveDC">Spell Save DC</label>
                            <input type="number" id="spellSaveDC" placeholder="13">
                        </div>
                        <div class="spell-stat">
                            <label for="spellAttackBonus">Spell Attack Bonus</label>
                            <input type="text" id="spellAttackBonus" placeholder="+5">
                        </div>
                    </div>
                    <div class="spell-slots">
                        <h4>Spell Slots <button id="autoSlotsBtn" class="btn-mini" style="margin-left:0.5rem">Auto Fill</button></h4>
                        <div class="spell-slot-grid">
                            <div class="spell-slot-level">
                                <label>1st</label>
                                <input type="number" id="spellSlots1" value="0" min="0">
                                <span>/</span>
                                <input type="number" id="spellSlotsMax1" value="0" min="0">
                            </div>
                            <div class="spell-slot-level">
                                <label>2nd</label>
                                <input type="number" id="spellSlots2" value="0" min="0">
                                <span>/</span>
                                <input type="number" id="spellSlotsMax2" value="0" min="0">
                            </div>
                            <div class="spell-slot-level">
                                <label>3rd</label>
                                <input type="number" id="spellSlots3" value="0" min="0">
                                <span>/</span>
                                <input type="number" id="spellSlotsMax3" value="0" min="0">
                            </div>
                            <div class="spell-slot-level">
                                <label>4th</label>
                                <input type="number" id="spellSlots4" value="0" min="0">
                                <span>/</span>
                                <input type="number" id="spellSlotsMax4" value="0" min="0">
                            </div>
                            <div class="spell-slot-level">
                                <label>5th</label>
                                <input type="number" id="spellSlots5" value="0" min="0">
                                <span>/</span>
                                <input type="number" id="spellSlotsMax5" value="0" min="0">
                            </div>
                            <div class="spell-slot-level">
                                <label>6th</label>
                                <input type="number" id="spellSlots6" value="0" min="0">
                                <span>/</span>
                                <input type="number" id="spellSlotsMax6" value="0" min="0">
                            </div>
                            <div class="spell-slot-level">
                                <label>7th</label>
                                <input type="number" id="spellSlots7" value="0" min="0">
                                <span>/</span>
                                <input type="number" id="spellSlotsMax7" value="0" min="0">
                            </div>
                            <div class="spell-slot-level">
                                <label>8th</label>
                                <input type="number" id="spellSlots8" value="0" min="0">
                                <span>/</span>
                                <input type="number" id="spellSlotsMax8" value="0" min="0">
                            </div>
                            <div class="spell-slot-level">
                                <label>9th</label>
                                <input type="number" id="spellSlots9" value="0" min="0">
                                <span>/</span>
                                <input type="number" id="spellSlotsMax9" value="0" min="0">
                            </div>
                        </div>
                    </div>
                    <textarea id="spellList" rows="12" placeholder="List your spells by level:&#10;&#10;Cantrips:&#10;‚Ä¢ Fire Bolt&#10;‚Ä¢ Mage Hand&#10;&#10;1st Level:&#10;‚Ä¢ Magic Missile&#10;‚Ä¢ Shield"></textarea>
                </section>
            </aside>
        </div>

        <!-- Bottom Notes Section (Notes tab) -->
        <section class="notes-section" data-panel="notes">
            <h3>Additional Notes & Backstory</h3>
            <textarea id="notes" rows="6" placeholder="Character backstory, campaign notes, and other details..."></textarea>
        </section>
        </main>

        <footer class="sheet-footer">
            <p>Darcnia Campaign | D&D 2024 Character Sheet | Auto-saves to browser</p>
        </footer>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal hidden">
        <div class="modal-content">
            <button class="modal-close">&times;</button>
            <div id="loginModalContent"></div>
        </div>
    </div>

    <script src="js/character-sheet.js?v=20251104-level"></script>
</body>
</html>
